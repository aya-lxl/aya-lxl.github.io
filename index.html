<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aya-lxl.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="直到海角天涯">
<meta property="og:url" content="https://aya-lxl.github.io/index.html">
<meta property="og:site_name" content="直到海角天涯">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="lxl">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aya-lxl.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>直到海角天涯</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">直到海角天涯</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/02/28/%E8%87%AA%E5%8A%A8%E5%BC%80%E5%85%B3%E6%B5%8B%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/28/%E8%87%AA%E5%8A%A8%E5%BC%80%E5%85%B3%E6%B5%8B%E8%AF%95/" class="post-title-link" itemprop="url">自动开关测试</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-28 10:52:25 / 修改时间：11:10:30" itemprop="dateCreated datePublished" datetime="2021-02-28T10:52:25+08:00">2021-02-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="自动开关测试"><a href="#自动开关测试" class="headerlink" title="自动开关测试"></a>自动开关测试</h4><p>软件写差不多了，就需要机器上完整地运行、测试，检查其中可能存在的错误，长时间运行的可靠性等。本篇的主题是自动开关测试，通过模拟开关变化，使机器反复地运行、停止。</p>
<p>项目中机器的启动与停止有多种方式，但无论如何均需要打开、关闭动作，这里的测试就是针对开关的模拟而设计的。</p>
<p>其中一种机器的开关方式：打开开关，等待一段时间，关闭，等待一段时间，再打开，如此循环。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> randseed;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">uint32_t</span> <span class="title">curl_rand</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint32_t</span> r;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 返回一个无符号32位整型的伪随机数. */</span></span><br><span class="line">    r = randseed = randseed * <span class="number">1103515245</span> + <span class="number">12345</span>;</span><br><span class="line">    <span class="keyword">return</span> (r &lt;&lt; <span class="number">16</span>) | ((r &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">uint32_t</span> <span class="title">random</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> curl_rand()%<span class="number">2000</span> + <span class="number">30</span>; <span class="comment">//避免数据太小</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">task_on_off</span><span class="params">(<span class="keyword">void</span>* pvData)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint16_t</span> sec;</span><br><span class="line">	</span><br><span class="line">    pvData = pvData;</span><br><span class="line">    randseed =seconds_cal();<span class="comment">//用时间产生一个初始值</span></span><br><span class="line">    </span><br><span class="line">    OSTimeDlyHMSM(<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sec=random()%<span class="number">120</span>+<span class="number">10</span>;</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>,sec/<span class="number">60</span>,sec%<span class="number">60</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        SWITCH_OPEN(<span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">        sec=random()%(<span class="number">4</span>*<span class="number">60</span>)+<span class="number">10</span>;</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>,sec/<span class="number">60</span>,sec%<span class="number">60</span>,<span class="number">0</span>);</span><br><span class="line">	 </span><br><span class="line">        SWITCH_CLOSE(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>打开或者关闭的时间是一个伪随机数，并且对随机数的大小进行了限制，避免过长或过短时间的开或者关。</p>
<p>还有一种机器，是通过自复位按钮来确定开关状态的，此时就是通过脉冲实现的。模拟代码如下。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">task_lpg_button</span><span class="params">(<span class="keyword">void</span>* pvData)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint16_t</span> sec;</span><br><span class="line">	</span><br><span class="line">    pvData = pvData;</span><br><span class="line">    randseed =seconds_cal();</span><br><span class="line">    </span><br><span class="line">    OSTimeDlyHMSM(<span class="number">0</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sec=random()%<span class="number">120</span>+<span class="number">10</span>;</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>,sec/<span class="number">60</span>,sec%<span class="number">60</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        SWITCH_OPEN(<span class="number">0</span>);</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">300</span>);</span><br><span class="line">        SWITCH_CLOSE(<span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">        sec=random()%(<span class="number">4</span>*<span class="number">60</span>)+<span class="number">10</span>;</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>,sec/<span class="number">60</span>,sec%<span class="number">60</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        SWITCH_OPEN(<span class="number">1</span>);</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">300</span>);</span><br><span class="line">        SWITCH_CLOSE(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码模拟脉冲时延时是300ms，实际的按钮脉冲时间不会这么长，主要是因为模拟软件运行所使用的板子的问题。</p>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><p>上述原理与实现都很简单，重点在于这样一种思想：工欲善其事，必先利其器。如果人去操作测试，效率不高，并且也很费时间，如果期间还在做其它事情，就会有忘记的可能，使用这些小工具就会避免这些问题。</p>
<p>但是另一方面，模拟测试也只会测试一方面的问题，如果想要全面的自动测试，还需要做大量的工作。</p>
<p>实际工作中随着项目的进行，还写了其它一些小工具，比如通信协议的校验值计算、数据转发与监控等等。这些工具的使用，对于发现问题、解决问题起到了很大的帮助。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/02/24/%E5%8D%95%E7%89%87%E6%9C%BAPWM%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/24/%E5%8D%95%E7%89%87%E6%9C%BAPWM%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90/" class="post-title-link" itemprop="url">单片机PWM播放音乐</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-24 11:37:00 / 修改时间：11:37:53" itemprop="dateCreated datePublished" datetime="2021-02-24T11:37:00+08:00">2021-02-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" itemprop="url" rel="index"><span itemprop="name">单片机</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="使用单片机PWM播放音乐"><a href="#使用单片机PWM播放音乐" class="headerlink" title="使用单片机PWM播放音乐"></a>使用单片机PWM播放音乐</h2><p>一个偶然的机会，看到一篇文章（即参考中的第一项），觉得挺有意思，想搞一下。而且最近一直在搞比例调节阀的事情，就是使用到了pwm。</p>
<h3 id="1、原理"><a href="#1、原理" class="headerlink" title="1、原理"></a>1、原理</h3><p><strong>（1）音调</strong></p>
<p>每一个音调都有一个固定的频率，比如下面这个图：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yokRSA"><img src="https://s3.ax1x.com/2021/02/21/yokRSA.jpg" alt="yokRSA.jpg"></a></p>
<p>只要使PWM的频率与相应的音调频率相同即可，当需要改变音调时，修改pwm周期即可。</p>
<p><strong>（2）音长</strong></p>
<p>四分之一音符、二分之一音符、全音符，通过延时简单处理，这样理解起来比较方便。</p>
<p><strong>（3）音量</strong></p>
<p>控制PWM的输出脉宽。这个值越大，发出的声音越大。当然要想达到理想的效果，还需要功放的帮助。</p>
<h3 id="2、实现"><a href="#2、实现" class="headerlink" title="2、实现"></a>2、实现</h3><p>单片机使用lpc2378，pwm输出后直接驱动喇叭发声。另一方面，实际的硬件接口输出电平为5V，喇叭使用12V才比较正常，所以声音输出比较小。</p>
<p>另一个重点就是音乐文件的生成。这个需要查看其它的资料。这里只是直接使用的网上的数据，该数据包含两部分：频率部分、时延部分，分别表示音调与音长。在程序运行时，先设置pwm为某一频率，之后延时对应的时间，然后重新开始下一个频率与延时。</p>
<p>如何查看简谱，可以参考网上的其它一些资料。下面的说明是网上的资料（<code>侵权删</code>）。</p>
<hr>
<p><a target="_blank" rel="noopener" href="https://bbs.huaweicloud.com/blogs/203985"><code>简谱说明</code></a></p>
<p><img src="https://s3.ax1x.com/2021/02/21/yokhOP.png" alt="yokhOP.png"></p>
<ol>
<li><p>左上角的1=C是表示调式（可以不用关心），1是唱名，C是音名，1=C是正调（就是常规的对应关系: 1-C，2-D, 3-E, 4-F, 5-G, 6-A, 7-B）；</p>
</li>
<li><p>左上角的 4/4 是四四拍，是指 四分音符为一拍， 每小节有四拍；</p>
</li>
<li><p>下面谱子上的竖线就是每个小节分隔符，和4/4对应；</p>
</li>
<li><p>“跑得快”上面5后面的横线表示延时一拍；</p>
</li>
<li><p>“一直没有眼睛”一句，5后面的点表示顺延半拍，一条下划线表示二分之一时间，两条下划线表示四分之一时间；</p>
</li>
</ol>
<h3 id="3、其它"><a href="#3、其它" class="headerlink" title="3、其它"></a>3、其它</h3><p>还有另外一个想法，即奈奎斯特定理。对音频采样，只要符合该定理，那么就可以完整地恢复原始的音频。该方法似乎更简单，并不涉及到哪个频率是多少，音长是多少，却可以恢复原始的声音。比如电话，通过某一频率采样，电话的另一端就可以恢复说话人的声音。当然这里面还涉及到采样精度问题。</p>
<p>很自然的产生另外一个想法，是否可以通过频率合成的方式来实现声音的合成的？每一段音乐或者声音，包含不同的频率，每个频率又具有不同的幅度，应该需要一个巨大的运算量。</p>
<hr>
<h4 id="主要参考"><a href="#主要参考" class="headerlink" title="主要参考"></a>主要参考</h4><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/34358127">https://zhuanlan.zhihu.com/p/34358127</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1758279">https://cloud.tencent.com/developer/article/1758279</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/devymex/p/3389620.html">https://www.cnblogs.com/devymex/p/3389620.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/759222924lele/p/9771260.html">https://www.cnblogs.com/759222924lele/p/9771260.html</a></p>
<p><a target="_blank" rel="noopener" href="https://mbb.eet-china.com/forum/topic/71081_1_1.html">https://mbb.eet-china.com/forum/topic/71081_1_1.html</a></p>
<p><a target="_blank" rel="noopener" href="https://bbs.huaweicloud.com/blogs/203985">https://bbs.huaweicloud.com/blogs/203985</a></p>
<p><a target="_blank" rel="noopener" href="https://www.huaweicloud.com/articles/adb4c1f99f28447b35a3e39a209b86a5.html">https://www.huaweicloud.com/articles/adb4c1f99f28447b35a3e39a209b86a5.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.technics.com/cn/high-res-audio/what-is-high-resolution-audio.html">https://www.technics.com/cn/high-res-audio/what-is-high-resolution-audio.html</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1656128">https://cloud.tencent.com/developer/article/1656128</a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/51379187">https://www.zhihu.com/question/51379187</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/02/04/%E6%A0%85%E6%9E%81%E7%94%B5%E9%98%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/04/%E6%A0%85%E6%9E%81%E7%94%B5%E9%98%BB/" class="post-title-link" itemprop="url">栅极电阻</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 20:03:59 / 修改时间：20:05:07" itemprop="dateCreated datePublished" datetime="2021-02-04T20:03:59+08:00">2021-02-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" itemprop="url" rel="index"><span itemprop="name">单片机</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="1、现象"><a href="#1、现象" class="headerlink" title="1、现象"></a>1、现象</h4><p>这是最近在一个项目中遇到的问题。简单说来就是单片机输出PWM，经过驱动放大后输出的波形发生变形。</p>
<p>因为项目中的电路图不方便直接拿来，所以这里使用一个类似的电路图（<code>来源网络，侵权删除</code>）来表示，负载是一个电磁阀，电压为<code>24V</code>。单片机产生的信号会经过施密特触发器、三极管等处理，之后才是到达MOS管。关键点在于R3电阻。</p>
<p><img src="https://s3.ax1x.com/2021/02/04/y3YVAJ.png" alt="y3YVAJ.png"></p>
<p>正常的波形（也就是R3左侧）如下：</p>
<p><img src="https://s3.ax1x.com/2021/02/01/yZpkPs.png" alt="yZpkPs.png"></p>
<p>原始电路中，R3使用的是1M的电阻，最终的输出波形为：</p>
<p><img src="https://s3.ax1x.com/2021/02/01/yZpeMV.jpg" alt="yZpeMV.jpg"></p>
<p>很显然，这已经不能正常使用了。</p>
<p>将R3电阻换为2K后，输出波形就会正常，如下图。</p>
<p><img src="https://s3.ax1x.com/2021/02/01/yZpYM6.png" alt="yZpYM6.png"></p>
<p>需要说明的是，该图是在有电阻负载的情况下测量的。如果不更换2K电阻，那么即使存在负载，波形也是不正确的。对于更换电阻后，存在负载时波形会比无负载时的波形要好。</p>
<h4 id="2、理解"><a href="#2、理解" class="headerlink" title="2、理解"></a>2、理解</h4><p>栅极上串联的电阻既不能太大，也不能太小。太大会降低开关速度，导致功耗增加，性能降低；太小又会引发振荡，导致故障。目前而言，2K电阻是可以产生正常波形的，当然还需要看后续的测试情况进行改进。</p>
<h4 id="3、一些参考"><a href="#3、一些参考" class="headerlink" title="3、一些参考"></a>3、一些参考</h4><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/50357150">https://zhuanlan.zhihu.com/p/50357150</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/107133948">https://zhuanlan.zhihu.com/p/107133948</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/145735392">https://zhuanlan.zhihu.com/p/145735392</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhuoqingjoking97298/article/details/104133970">https://blog.csdn.net/zhuoqingjoking97298/article/details/104133970</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yunnGuitu/article/details/79624005">https://blog.csdn.net/yunnGuitu/article/details/79624005</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/02/01/wwdg/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/01/wwdg/" class="post-title-link" itemprop="url">wwdg</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-01 07:41:47 / 修改时间：07:47:20" itemprop="dateCreated datePublished" datetime="2021-02-01T07:41:47+08:00">2021-02-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" itemprop="url" rel="index"><span itemprop="name">单片机</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>STM32F103窗口看门狗（Window watchdog）</p>
<h4 id="1、结构框图"><a href="#1、结构框图" class="headerlink" title="1、结构框图"></a>1、结构框图</h4><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yV0yT0"><img src="https://s3.ax1x.com/2021/02/01/yV0yT0.png" alt="yV0yT0.png"></a></p>
<ul>
<li><p>从RCC产生的时钟经过4096分频后进入WDG预分频器</p>
</li>
<li><p>WWDG_CR寄存器之T[6:0]是看门狗计数器值，预分频器每产生一个时钟减一。当从0x40变为0x3F时产生看门狗复位（T6位跳变到0）。</p>
</li>
<li><p>WWDG_CFR寄存器之W[6:0]是窗口值，用来与递减计数器T进行比较，W[6:0]应该小于0x80。当计数器T的值小于W时才可以重新设置WWDG_CR的T值，也就是<code>喂狗</code>，如下图所示：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yV0ckV"><img src="https://s3.ax1x.com/2021/02/01/yV0ckV.png" alt="yV0ckV.png"></a></p>
<p>也就是说<code>喂狗</code>需要在0X3F与W[6:0]这个<code>窗口</code>之间，过早过晚都会引起复位.</p>
<p>另外也可以看出，T[6:0]设置区间为0x40~0x7f.</p>
</li>
<li><p>WWDG_CFR之EWI位：提前唤醒中断 (Early wakeup interrupt) 此位若置’1’，则当计数器值达到40h，即产生中断。可以在中断中<code>喂狗</code>。</p>
</li>
<li><p>WWDG_CFR之WDGTB位：将预分频器的时钟再次分频，该位位0-3时分别分频1、2、4、8。所以可以得到如下的计算时间公式：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/yV0gYT"><img src="https://s3.ax1x.com/2021/02/01/yV0gYT.png" alt="yV0gYT.png"></a></p>
</li>
<li><p>其它还包括使能位即状态位等。</p>
</li>
</ul>
<h4 id="2、代码"><a href="#2、代码" class="headerlink" title="2、代码"></a>2、代码</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x_wwdg.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wwdg_init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line"></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = WWDG_IRQn;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">0</span>;</span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class="line">    NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_WWDG, ENABLE);</span><br><span class="line"></span><br><span class="line">    WWDG_SetPrescaler(WWDG_Prescaler_8);</span><br><span class="line">    WWDG_SetWindowValue(<span class="number">0x7f</span>);</span><br><span class="line">    WWDG_SetCounter(<span class="number">0x7e</span>);</span><br><span class="line"></span><br><span class="line">    WWDG_ClearFlag();</span><br><span class="line">    WWDG_Enable(<span class="number">0x7e</span>);</span><br><span class="line">    WWDG_EnableIT();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">WWDG_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(WWDG_GetFlagStatus())</span><br><span class="line">    &#123;</span><br><span class="line">        WWDG_ClearFlag();</span><br><span class="line">        WWDG_SetCounter(<span class="number">0x7e</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置过程还是比较简单的。</p>
<h4 id="3、问题"><a href="#3、问题" class="headerlink" title="3、问题"></a>3、问题</h4><p>但是引出另外一个问题，即<code>喂狗</code>在中断中处理是否合适？</p>
<p>比如在一篇文章中，作者认为（原文参考末尾链接）：</p>
<p><code>窗口看门狗WWDG----系统内部的故障探测器，时钟与系统相同。如果系统时钟不走了，这个狗也就失去了作用了，主要用于监视软件错误。</code></p>
<p><code>WWDG的中断不是用于日常喂狗的，如果用于日常喂狗动作，那WWDG的相对于IWDG，功能也就没什么特别了。WWDG的中断是给程序员最后一次喂狗的机会，一般进入这个中断时，表示你在其他地方安排的喂狗操不能凑效了，而发生这种现象时，肯定是系统有问题了，或者程序有Bug或者干扰，在这种情况下，这个中断时为了让你的程序在发生真正的看门狗复位前，有一个紧急处理的机会，如保存重要数据，或者系统刹车，说白了，就是让CPU写“遗嘱”；简单的在WWDG中断中喂狗，既没有发挥WWDG相对于IWDG的优势，又因为在中断中喂狗，而为以后的产品留下了隐患。</code></p>
<p>如果不在中断中处理，那么因为时间窗口的原因，处理起来可能会比较麻烦，就是需要每过一段时间进行一次<code>喂狗</code>，时间如何把控？</p>
<h4 id="4、参考"><a href="#4、参考" class="headerlink" title="4、参考"></a>4、参考</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012351051/article/details/50385074?utm_source=copy">https://blog.csdn.net/u012351051/article/details/50385074?utm_source=copy</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/01/30/STM32%E4%B9%8BADC%E7%94%9F%E6%88%90%E6%B3%A2%E5%BD%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/30/STM32%E4%B9%8BADC%E7%94%9F%E6%88%90%E6%B3%A2%E5%BD%A2/" class="post-title-link" itemprop="url">STM32之ADC生成波形</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-30 21:07:24 / 修改时间：21:08:11" itemprop="dateCreated datePublished" datetime="2021-01-30T21:07:24+08:00">2021-01-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" itemprop="url" rel="index"><span itemprop="name">单片机</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>平台：STM32F103VET6</p>
<h3 id="1、三角波"><a href="#1、三角波" class="headerlink" title="1、三角波"></a>1、三角波</h3><p>使用STM32F103 DAC输出三角波，定时器2触发。</p>
<p>PA5,也就是通道2,输出波形：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykU1eO"><img src="https://s3.ax1x.com/2021/01/30/ykU1eO.png" alt="ykU1eO.png"></a></p>
<p>调整幅值为2047后：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUYYd"><img src="https://s3.ax1x.com/2021/01/30/ykUYYd.jpg" alt="ykUYYd.jpg"></a></p>
<p>在增加1V的DC偏移</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUUSI"><img src="https://s3.ax1x.com/2021/01/30/ykUUSI.jpg" alt="ykUUSI.jpg"></a></p>
<p>通道1也可以，但是因为硬件原因，波形不正确。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUwOf"><img src="https://s3.ax1x.com/2021/01/30/ykUwOf.png" alt="ykUwOf.png"></a></p>
<p>其输出波形：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUBm8"><img src="https://s3.ax1x.com/2021/01/30/ykUBm8.png" alt="ykUBm8.png"></a></p>
<h3 id="2、代码"><a href="#2、代码" class="headerlink" title="2、代码"></a>2、代码</h3><p><strong>(1) DAC配置</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dac1_init_triangle</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">    DAC_InitTypeDef DAC_InitType;</span><br><span class="line"></span><br><span class="line">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_DAC, ENABLE);</span><br><span class="line"></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AIN;</span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line">    GPIO_SetBits(GPIOA, GPIO_Pin_5);</span><br><span class="line"></span><br><span class="line">    DAC_InitType.DAC_Trigger = DAC_Trigger_T2_TRGO;<span class="comment">//TIM2 TRGO事件</span></span><br><span class="line">    DAC_InitType.DAC_WaveGeneration =DAC_WaveGeneration_Triangle;</span><br><span class="line">    DAC_InitType.DAC_LFSRUnmask_TriangleAmplitude = DAC_TriangleAmplitude_2047;</span><br><span class="line">    DAC_InitType.DAC_OutputBuffer = DAC_OutputBuffer_Disable;</span><br><span class="line">    DAC_Init(DAC_Channel_2, &amp;DAC_InitType);</span><br><span class="line"></span><br><span class="line">    DAC_SetChannel1Data(DAC_Align_12b_R, <span class="number">0</span>);</span><br><span class="line">    DAC_SoftwareTriggerCmd(DAC_Channel_2,ENABLE);</span><br><span class="line">    DAC_Cmd(DAC_Channel_2, ENABLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设置输出电压</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dac1_set_vol</span><span class="params">(<span class="keyword">float</span> vol)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">uint16_t</span> data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(vol &gt; <span class="number">3.3</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    data = <span class="number">4096</span> * vol / <span class="number">3.3</span>;</span><br><span class="line">    DAC_SetChannel2Data(DAC_Align_12b_R, data); <span class="comment">//12位右对齐数据格式设置DAC值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>(2)tim2配置</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tim2_init</span><span class="params">(u16 arr,u16 psc)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;</span><br><span class="line">	</span><br><span class="line">	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2,ENABLE);</span><br><span class="line">	TIM_DeInit(TIM2);</span><br><span class="line">	TIM_InternalClockConfig(TIM2);</span><br><span class="line">	TIM_TimeBaseStructure.TIM_Prescaler = psc<span class="number">-1</span>;	 <span class="comment">//72MHz分频系数</span></span><br><span class="line">	TIM_TimeBaseStructure.TIM_ClockDivision = TIM_CKD_DIV1;</span><br><span class="line">	TIM_TimeBaseStructure.TIM_Period = arr<span class="number">-1</span>;</span><br><span class="line">	TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;</span><br><span class="line"></span><br><span class="line">	TIM_TimeBaseInit(TIM2,&amp;TIM_TimeBaseStructure);</span><br><span class="line">	TIM_ClearFlag(TIM2, TIM_FLAG_Update);</span><br><span class="line">	TIM_SelectOutputTrigger(TIM2,TIM_TRGOSource_Update);<span class="comment">//更新事件被选为触发输入(TRGO)</span></span><br><span class="line">	TIM_ARRPreloadConfig(TIM2, ENABLE);</span><br><span class="line">	TIM_Cmd(TIM2,ENABLE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、原理"><a href="#3、原理" class="headerlink" title="3、原理"></a>3、原理</h3><p>内部的三角波计数器每次触发事件之后3个APB1时钟周期后累加1。计数器的值与DAC_DHRx寄存器的数值相加并丢弃溢出位后写入DAC_DORx寄存器。在传入DAC_DORx寄存器的数值小于MAMP[3:0]位定义的最大幅度时，三角波计数器逐步累加。一旦达到设置的最大幅度，则计数器开始递减，达到0后再开始累加，周而复始。  </p>
<p>上面这一段摘自<code>《STM32F10xxx参考手册  》</code>，在这里触发事件就是定时器2的TIM_TRGOSource_Update更新事件。所以，更改定时器的PSC与ARR即可改变三角波的周期。比如下图,PSC=6,ARR=1000。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUykQ"><img src="https://s3.ax1x.com/2021/01/30/ykUykQ.jpg" alt="ykUykQ.jpg"></a></p>
<p>另一方面，三角波形的周期还与三角波的幅值有关，比如在上述定时器参数下，幅值变由DAC_TriangleAmplitude_2047变为DAC_TriangleAmplitude_1023，则波形变为：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUcfs"><img src="https://s3.ax1x.com/2021/01/30/ykUcfs.jpg" alt="ykUcfs.jpg"></a></p>
<p>三角波的周期可以这样计算</p>
<ul>
<li><p>首先计算定时器触发频率：72M/(PSC+1)/ARR</p>
<p>这里PSC=5,ARR=1000,72M/(5+1)/1000=12K,那么周期就是1/12K.</p>
</li>
<li><p>三角波周期</p>
<p>DAC_TriangleAmplitude_2047时，则周期为2047*(1/12K)=170.6ms</p>
<p>DAC_TriangleAmplitude_1023时，则周期为1023*(1/12K)=85ms</p>
</li>
</ul>
<h3 id="4、噪声"><a href="#4、噪声" class="headerlink" title="4、噪声"></a>4、噪声</h3><p>  DAC沟通过那样可以产生噪声，只需要将配置中改为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DAC_InitType.DAC_WaveGeneration = DAC_WaveGeneration_Noise;</span><br><span class="line">DAC_InitType.DAC_LFSRUnmask_TriangleAmplitude=DAC_LFSRUnmask_Bits11_0;</span><br></pre></td></tr></table></figure>
<p>波形如下图：</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/ykUW60"><img src="https://s3.ax1x.com/2021/01/30/ykUW60.jpg" alt="ykUW60.jpg"></a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/01/19/%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8F%91%E4%B8%8E%E7%9B%91%E6%8E%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/19/%E4%B8%B2%E5%8F%A3%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8F%91%E4%B8%8E%E7%9B%91%E6%8E%A7/" class="post-title-link" itemprop="url">串口数据转发与监控</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-19 20:45:57 / 修改时间：20:49:57" itemprop="dateCreated datePublished" datetime="2021-01-19T20:45:57+08:00">2021-01-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这个小软件是在某个项目中作为附属开发的工具，使用python开发。</p>
<h4 id="起因说明"><a href="#起因说明" class="headerlink" title="起因说明"></a>起因说明</h4><p>该项目中，单片机与Android屏通信，接口使用RS-232。二者之间的通信协议继承之前的结构，并且增加了许多新的功能。屏与单片机均可以主动发送数据，数据错误的时候还会重新发送。</p>
<p>通过实际的操作发现，有时候在屏上的操作会没有反应，原因是单片机未接收到数据（这种处理方式是协议设计的原因，即屏只是用来显示而不处理数据，操作每个按键都会下发数据，Android不关注具体每个键的作用，等到单片机接收并应答后才会响应），也就是存在数据丢失的情况。具体丢失哪些数据，在操作步骤的哪个节点上丢失无从得知。</p>
<h4 id="工作过程"><a href="#工作过程" class="headerlink" title="工作过程"></a>工作过程</h4><p>原理很简单，就是在通信双方的链路中插入计算机，计算机将数据转发的同时，进行数据的显示与记录，这样对于双方的通信的数据就会比较清楚。原理框图如下。</p>
<p><img src="https://s3.ax1x.com/2021/01/19/s2wBHU.png" alt="s2wBHU.png"></p>
<p>正常工作时，数据通过上面的链路通信，调试时使用下面的链路，也就是数据会经过计算机的转发，与此同时实现数据的显示、存储与分析。</p>
<h4 id="软件实现"><a href="#软件实现" class="headerlink" title="软件实现"></a>软件实现</h4><p>主要包括2个库：tkinter用来做界面，serial用来操作串口。效果如下图。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s2wrEF"><img src="https://s3.ax1x.com/2021/01/19/s2wrEF.png" alt="s2wrEF.png"></a></p>
<p>可以对串口进行选择，对串口参数进行配置。</p>
<p>最后两个按键可以实现清屏处理与数据保存，数据保存按照时间命名为txt文件，方便查看与处理。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s2waj0"><img src="https://s3.ax1x.com/2021/01/19/s2waj0.png" alt="s2waj0.png"></a></p>
<p>文件中的保存方式就是软件中数据的显示方式，如下。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s2wwuV"><img src="https://s3.ax1x.com/2021/01/19/s2wwuV.png" alt="s2wwuV.png"></a></p>
<h4 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h4><p>这个小软件发挥了很大的作用，除了上面提到的数据丢失问题，还发现了其它一些不容易出现的问题，这样就可以更有针对性的优化软件。</p>
<p>一个需要注意的问题是数据显示。因为有两个串口可能会同时接收到数据，那么显示数据时可能就会有冲突。所以需要一个<code>锁</code>来保证数据写入的正常，待数据写入完成后，释放锁。</p>
<p>再说一句，这个项目中单片机软件的实现架构不太好，uart数据接收方式也有问题，另外一些操作相当费时。比如键盘上的LCD屏，调试的时候发现，竟然需要100多毫秒。而上面所说的数据重发数据间隔并没有那么长，基本上也就50ms左右。某些情况下，两帧数据会连续发送，其发送间隔很小，如果在处理接收的数据过程中存在比较费时的操作，那么下次的是数据可能就会无法正常接收，也就是会造成数据丢失。究其根本，还是单片机接收Android下发的数据存在比较大的问题，这个项目会在另一篇中详细说明。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/01/18/%E6%95%B0%E6%8D%AE%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%E5%B0%8F%E5%B7%A5%E5%85%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/18/%E6%95%B0%E6%8D%AE%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%E5%B0%8F%E5%B7%A5%E5%85%B7/" class="post-title-link" itemprop="url">数据图形显示小工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-18 19:41:53 / 修改时间：20:09:41" itemprop="dateCreated datePublished" datetime="2021-01-18T19:41:53+08:00">2021-01-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-来历"><a href="#1-来历" class="headerlink" title="1 来历"></a>1 来历</h2><p>采用python编写的一个小工具，用来对接收到的数据进行图形化显示，目的是方便观察数据的波动。如果在考虑其它一些功能，比如计算均值、方差等，则可以更全面的对数据进行描述与解释。</p>
<p>因为工作中某个项目的原因，需要通过比例调节阀来控制液体流速。而控制比例调节阀的基础就是液体的流速，而测量流速的准确性关系到实际调节的准确性。所以该工具的目的就是在软件调试阶段，对流速测量与比例调节阀调节准确性进行评估，以便改进软件。</p>
<h2 id="2-原理"><a href="#2-原理" class="headerlink" title="2 原理"></a>2 原理</h2><p>软件主要用到2个库：matplotlib、serial。</p>
<p>首先打开串口，当然需要设置串口的参数，诸如波特率、校验等。当接收到数据时，进行绘图。这里有2种方法，（1）每次只画一个点，之前的点不清除；（2）每次清除之前的点，重新绘制所有的点，包括新接收到的点。显而易见，第二种方法比较耗费资源。两种方法的图形如下所示。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/scnfCd"><img src="https://s3.ax1x.com/2021/01/18/scnfCd.png" alt="scnfCd.png"></a></p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/scngED"><img src="https://s3.ax1x.com/2021/01/18/scngED.png" alt="scngED.png"></a></p>
<p>其实，两种方法都可以看出动态效果，但是第二种方法画出的点是连在一起的显。</p>
<h2 id="3-工况"><a href="#3-工况" class="headerlink" title="3 工况"></a>3 工况</h2><p>再来看一下实际中需要测量的液体流速。</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/scnR4H"><img src="https://s3.ax1x.com/2021/01/18/scnR4H.png" alt="scnR4H.png"></a></p>
<p>可以看到尖峰存在，而且是两种峰值，似乎也有一定的周期性，猜想可能是某种系统性的原因引起的，可能是软件引起的，也可能是硬件引起的，或者干脆就是泵的稳定性有点差。</p>
<p>但是数据仍稳定在一个较小的区间之内，比如上述图形数据的均值为89.41，标准差为0.13.</p>
<p>如果存在外部的、独立的流速测量仪器，那么可以将其作为基准使用。但是，因为条件的限制，只能使用目前这种方法来调试。另外一个比较重要的原因是，该设备对流速没有很高的精度要求，每分钟40L或者45L影响不大，但是不能是每分钟80L。</p>
<h2 id="4-结尾"><a href="#4-结尾" class="headerlink" title="4 结尾"></a>4 结尾</h2><p>该小程序只是个人作为调试使用的，为了方便工作。如果有需要，还可以增加串口参数设置、接收数据统计显示、数据保存等功能。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/01/17/hexo%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/17/hexo%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">hexo安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-17 13:18:54 / 修改时间：19:28:52" itemprop="dateCreated datePublished" datetime="2021-01-17T13:18:54+08:00">2021-01-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%AB%99/" itemprop="url" rel="index"><span itemprop="name">网站</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="0-关于本文"><a href="#0-关于本文" class="headerlink" title="0 关于本文"></a>0 关于本文</h2><p>本文仅仅是作为个人搭建过程的一个简单记录。</p>
<p>本文参考了网上诸多资料，未能将全部参考信息包含进去，非常感谢各位。若有侵权，联系<a href="aya_lxl@163.com">邮箱</a>删除。</p>
<h2 id="1-安装git"><a href="#1-安装git" class="headerlink" title="1 安装git"></a>1 安装git</h2><ol>
<li>配置user信息</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;你的GitHub用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;你的GitHub注册邮箱&quot;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>生成ssh密钥文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;你的GitHub注册邮箱&quot;</span></span><br></pre></td></tr></table></figure>
<p>直接三个回车即可，默认不需要设置密码。</p>
<p>然后找到生成的.ssh的文件夹中的id_rsa.pub密钥，将内容全部复制。</p>
<p>打开key设置页面，新建new SSH Key。</p>
<p><img src="https://pic1.zhimg.com/v2-72a3f22c080e99343c3cc4aabce10e3c_r.jpg" alt="github setting keys"></p>
<p>Title为标题，任意填即可，将刚刚复制的id_rsa.pub内容粘贴进去，最后点击Add SSH key。<br>在Git Bash中检测GitHub公钥设置是否成功，输入 ssh git@giTitle为标题，任意填即可，将刚刚复制的id_rsa.pub内容粘贴进去，最后点击Add SSH key。<br>在Git Bash中检测GitHub公钥设置是否成功，输入 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh git@github.com</span><br></pre></td></tr></table></figure>
<p> <img src="https://pic3.zhimg.com/80/v2-da481ffa686410becd4186c656b4ebd6_1440w.jpg" alt="github key set resp"></p>
<p>如上则说明成功。这里之所以设置GitHub密钥原因是，通过非对称加密的公钥与私钥来完成加密，公钥放置在GitHub上，私钥放置在自己的电脑里。</p>
<p>第一次安装可能会不正确，此时，在上述命令下，输入yes,回车，会在.ssh的文件夹下生成<code>known_hosts</code>文件.</p>
</li>
</ol>
<h2 id="2-安装Node-js"><a href="#2-安装Node-js" class="headerlink" title="2 安装Node.js"></a>2 安装Node.js</h2><p>Hexo基于Node.js，Node.js下载地址：<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">Download | Node.js</a> 下载安装包，注意安装Node.js会包含环境变量及npm的安装，安装后，检测Node.js是否安装成功，在命令行中输入 node -v :</p>
<p><img src="https://pic1.zhimg.com/80/v2-76ea38e9545e606f975781e47933b010_1440w.jpg" alt="node -v"></p>
<p>检测npm是否安装成功，在命令行中输入npm -v :</p>
<p><img src="https://pic2.zhimg.com/80/v2-bede250b8456df92475b455fda8c1dd9_1440w.jpg" alt="npm -v"></p>
<h2 id="3-安装Hexo"><a href="#3-安装Hexo" class="headerlink" title="3 安装Hexo"></a>3 安装Hexo</h2><p>Hexo就是我们的个人博客网站的框架， 这里需要自己在电脑常里创建一个文件夹，可以命名为Blog，Hexo框架与以后你自己发布的网页都在这个文件夹中。</p>
<p><strong><em>以下命令可能需要在管理员模式(win10)下使用</em></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>这个安装时间较长耐心等待，安装完成后，初始化我们的博客，输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure>
<p>为了检测我们的网站雏形，分别按顺序输入以下三条命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo new test_my_site</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>这些命令在后面作介绍，完成后，打开浏览器输入地址：localhost:4000</p>
<p>如果提示找不到server命令则需要运行命令<code>$ npm install hexo-server --save</code></p>
<h2 id="4-创建站点"><a href="#4-创建站点" class="headerlink" title="4 创建站点"></a>4 创建站点</h2><p>可参考官方文档<a target="_blank" rel="noopener" href="https://docs.github.com/cn/github/working-with-github-pages/creating-a-github-pages-site#creating-a-repository-for-your-site">创建 GitHub Pages 站点</a></p>
<h2 id="5-推送网站"><a href="#5-推送网站" class="headerlink" title="5 推送网站"></a>5 推送网站</h2><p>在blog根目录里的_config.yml文件称为<strong>站点</strong>配置文件，如下图</p>
<p><img src="https://pic2.zhimg.com/80/v2-cb1fd5e5a2e73f513234e434724c7c55_720w.jpg" alt="站点配置文件"></p>
<p>进入根目录里的themes文件夹，里面也有个_config.yml文件，这个称为<strong>主题</strong>配置文件，如下图</p>
<p><img src="https://pic4.zhimg.com/80/v2-4252029e5634bf91c7d58916ae2b8ac3_720w.jpg" alt="主题配置文件"></p>
<p>下一步将我们的Hexo与GitHub关联起来，打开站点的配置文件_config.yml，翻到最后修改为：</p>
<p>deploy:<br>type: git<br>repo: 这里填入你之前在GitHub上创建仓库的完整路径，记得加上 .git<br>branch: master</p>
<p>例如</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:aya-lxl/aya-lxl.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>


<p>保存站点配置文件。</p>
<p>其实就是给hexo d 这个命令做相应的配置，让hexo知道你要把blog部署在哪个位置，很显然，我们部署在我们GitHub的仓库里。最后安装Git部署插件，输入命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>


<p>这时，我们分别输入三条命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean </span><br><span class="line">hexo g </span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>其实第三条的 hexo d 就是部署网站命令，d是deploy的缩写。完成后，打开浏览器，在地址栏输入你的放置个人网站的仓库路径，即 <a href="http://aya-lxl.github.io/">http://aya-lxl.github.io</a>.</p>
<p>你就会发现你的博客已经上线了，可以在网络上被访问了。</p>
<h2 id="7-其它"><a href="#7-其它" class="headerlink" title="7 其它"></a>7 其它</h2><p>删除文章的过程一样也很简单，先删除本地文件，然后通过生成和部署命令进而将远程仓库中的文件也一并删除。具体来说，以最开始默认形成的<code>helloworld.md</code>这篇文章为例。</p>
<p>首先进入到source / _post 文件夹中，找到<code>helloworld.md</code>文件，在本地直接执行删除。然后依次执行<code>hexo g</code>，<code>hexo d</code>，再去主页查看你就会发现你的博客上面已经空空如也了，这就是如何删除文章的方法。</p>
<h2 id="6-参考"><a href="#6-参考" class="headerlink" title="6 参考"></a>6 参考</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26625249">https://zhuanlan.zhihu.com/p/26625249</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/84a8384be1ae">https://www.jianshu.com/p/84a8384be1ae</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Time888/article/details/70249241">https://blog.csdn.net/Time888/article/details/70249241</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aya-lxl.github.io/2021/01/17/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="lxl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="直到海角天涯">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/17/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-17 13:17:54" itemprop="dateCreated datePublished" datetime="2021-01-17T13:17:54+08:00">2021-01-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">lxl</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lxl</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
